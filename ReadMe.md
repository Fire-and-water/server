# Сервер для игры Fair & Water +
Сервер состоит из 3 основных частей:
+ http-сервер (обеспечивает всё, что не связано с процессом игры)
+ socket-сервер (обслуживает процесс игры)
+ База данных
## Http-сервер
Здесь будет представлен API для http-сервера. Для многих запросов необходима открытая сессия (открывается при
авторизации: в ответ на запрос авторизации приходит поле cart_session в header ответа, его необходимо
передавать при дальнейших запросов).
### API
Все запросы передаются на сервер http://185.178.47.135:8082

| Смысл                               | Ссылка                                      | Ответ сервера (успешный)        | Нужна открытая сессия? |
|-------------------------------------|---------------------------------------------|---------------------------------|------------------------|
| Регистрация                         | /registerByEmail{nickname, email, password} | {status, msg, id}               | нет                    |
| Авторизация                         | /authByEmail{email, password}               | {status, msg, user}             | нет                    |
| Выход                               | /logout                                     | {status, msg}                   | да                     |
| Свободен ли никнейм                 | /isFreeNickName{nickName}                   | {isFree}                        | нет                    |
| Свободна ли почта                   | /isFreeEmail{email}                         | {isFree}                        | нет                    |
| Смена пароля                        | /changePassword{oldPassword, newPassword}   | {status, msg}                   | да                     |
| Получить топ игроков (топ 10 и id)  | /getTop{id}                                 | [{id, nickname, place, rating}] | нет                    |
| Получить список уровней             | /getLevels                                  | {}                              | да                     |
| Получить карту уровня               | /getLevelById{id}                           | {map}                           | нет                    |
| Получить информацию о себе          | /myInfo                                     | {user}                          | да                     |
| Получить токен для игрового сервера | /getToken                                   | {status, msg, token}            | да                     |
| Получить историю игр                | /getMyHistoryGames                          | [{_}]                           | да                     |
| Получить информацию об игроке       | /userInfo{id}                               | {user}                          | нет                    |
| Принудительно обновить топ*         | /updateTop                                  | -                               | нет                    |
 `*` - этого здесь быть не должно. Топ обновляется раз в сутки, как в Stepik, например. Но для тестов можно использовать этот запрос

 Почти каждый запрос содержит status. Норма -- `status=1`. Нулевой статус соответствует ошибки авторизации. Во многих 
 неуспешно завершающихся запросах содержится `msg`.  Остальные `status` для каждого запроса имеют разный смысл. Все сопровождаются своим
 `msg`.